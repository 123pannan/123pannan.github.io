<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>超市商品销售数据</title>
    <!-- 引入 Chart.js 图表库（在线链接，无需下载） -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 页面整体样式 */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        /* 表格样式 */
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        /* 图表容器样式 */
        .chart-container {
            width: 100%;
            height: 400px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>超市商品销售数据分析</h1>

        <!-- 商品销售列表 -->
        <h2>商品销售明细</h2>
        <table id="productTable">
            <thead>
                <tr>
                    <th>商品ID</th>
                    <th>商品名称</th>
                    <th>类别</th>
                    <th>单价</th>
                    <th>销售量</th>
                    <th>销售额</th>
                </tr>
            </thead>
            <tbody>
                <!-- 数据将通过JS动态生成 -->
            </tbody>
        </table>

        <!-- 销售趋势折线图 -->
        <h2>近7日销售趋势</h2>
        <div class="chart-container">
            <canvas id="salesTrendChart"></canvas>
        </div>

        <!-- 商品类别占比饼图 -->
        <h2>商品类别销售占比</h2>
        <div class="chart-container">
            <canvas id="categoryPieChart"></canvas>
        </div>
    </div>

    <script>
        // 模拟商品销售数据
        const products = [
            { id: 1, name: "苹果", category: "水果", price: 5.99, sales: 120 },
            { id: 2, name: "香蕉", category: "水果", price: 3.99, sales: 150 },
            { id: 3, name: "牛奶", category: "乳制品", price: 6.99, sales: 90 },
            { id: 4, name: "面包", category: "烘焙", price: 4.5, sales: 80 },
            { id: 5, name: "鸡蛋", category: "生鲜", price: 8.99, sales: 100 },
            { id: 6, name: "橙子", category: "水果", price: 4.99, sales: 110 },
            { id: 7, name: "酸奶", category: "乳制品", price: 5.5, sales: 70 },
            { id: 8, name: "蛋糕", category: "烘焙", price: 12.99, sales: 50 }
        ];

        // 模拟近7日销售数据
        const salesData = {
            labels: ["10月17日", "10月18日", "10月19日", "10月20日", "10月21日", "10月22日", "10月23日"],
            values: [1200, 1500, 1300, 1400, 1600, 1700, 1800]
        };

        // 1. 渲染商品销售列表
        const productTableBody = document.querySelector('#productTable tbody');
        products.forEach(product => {
            const row = document.createElement('tr');
            const totalSales = (product.price * product.sales).toFixed(2);
            row.innerHTML = `
                <td>${product.id}</td>
                <td>${product.name}</td>
                <td>${product.category}</td>
                <td>¥${product.price}</td>
                <td>${product.sales}</td>
                <td>¥${totalSales}</td>
            `;
            productTableBody.appendChild(row);
        });

        // 2. 绘制销售趋势折线图
        const salesTrendCtx = document.getElementById('salesTrendChart').getContext('2d');
        new Chart(salesTrendCtx, {
            type: 'line',
            data: {
                labels: salesData.labels,
                datasets: [{
                    label: '销售额（元）',
                    data: salesData.values,
                    borderColor: '#3e95cd',
                    backgroundColor: 'rgba(62, 149, 205, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '¥' + value;
                            }
                        }
                    }
                }
            }
        });

        // 3. 统计商品类别销售量并绘制饼图
        const categorySales = {};
        products.forEach(product => {
            categorySales[product.category] = (categorySales[product.category] || 0) + product.sales;
        });

        const categoryPieCtx = document.getElementById('categoryPieChart').getContext('2d');
        new Chart(categoryPieCtx, {
            type: 'pie',
            data: {
                labels: Object.keys(categorySales),
                datasets: [{
                    data: Object.values(categorySales),
                    backgroundColor: ['#f56954', '#00a65a', '#f39c12', '#00c0ef']
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });
    </script>
</body>
</html>